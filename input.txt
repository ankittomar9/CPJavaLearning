// Inside the for loop (for the subarray from start to end)
for(int i=start;i<=end;i++){
    sum=sum+nums[i];
    // ERROR: You compare the partial sum to the max answer.
    if(sum>ans){ 
        ans=sum;
    }
}

// After the for loop completes
for(int i=start;i<=end;i++){
    sum=sum+nums[i]; // Accumulate the full sum
}
// CORRECT: Now compare the full sum to the max answer.
if(sum > ans){ 
    ans = sum;
}